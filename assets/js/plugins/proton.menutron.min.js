/*
 * Copyright (c) 2012 Mike King @micjamking (http://dev.85pixels.com)
 *
 * jQuery Menutron plugin
 * Version 1.0 (March 2012)
 *
 * Licensed under the MIT License
 */
!function(h,p,f){"use strict";h.fn.menutron=function(e){var n={selectId:"pro_resmenu",maxScreenWidth:600,textBefore:!1,// Text to add before the mobile menu
selectOption:!1,// First select option
activeClass:"current-menu-item"},d=h.extend(n,e);return this.each(function(){function e(){s=h(a).css("display")||"flex",n(),i(),t()}function n(){
// Media query for device screens (default: 600px)
// *Note, I would like to use window.matchMedia(screenWidth).matches here, but it does not work on
// Android 2.3 (Gingerbread). https://developer.mozilla.org/en/DOM/window.matchMedia#section_4
h(p).width()<d.maxScreenWidth?(
// Hides the original menu list from the display
h(r).css("display","inline-block"),
// Hides the original menu list from the display
h(a).css("display","none")):(
// Hides the select menu from the display
h(r).css("display","none"),
// Show the original menu list
h(a).css("display",s))}
// Convert the menu to select
function l(e,t,s){if(s=s||"",h(e).children(".li").length)var n=".li";else var n="li";h(e).children(n).each(function(){var e=h(this);if(h(this).hasClass("li")&&(e=h(this).find("li:first")),e.hasClass("pmm_header"))var n="|&nbsp;"+e.find("h2:first").text()+"&nbsp;|";
//var url = false;
else
//var url = _this.find('a:first').attr('href');
var n=e.find("a:first").text();if(e.find("a:first").hasClass("link_disabled")||e.hasClass("link_disabled"));else var i=e.find("a:first").attr("href");void 0!==i&&!1!==i&&"#"!==i&&0!==i.length||(i=""),h("<option/>",{value:i,html:s+n,disabled:!i,selected:!(!e.hasClass(d.activeClass)||d.selectOption)}).appendTo(t),
// Submenu
0<e.children("ul").length&&
//build_menu(_this.children('ul'), select, add + "&nbsp;&nbsp;");
l(e.children("ul"),t,s+"--"),0<e.children(".pmm_container, .pmm_simple").length&&
//build_menu(_this.children('ul'), select, add + "&nbsp;&nbsp;");
l(e.children(".pmm_container, .pmm_simple").children("ul"),t,s+"--")})}function i(){
// Loop through the current list menu & adds the li's text
// & the anchors url to the option & it's value respectively.
h(a).each(function(){l(h(this),r)}),
// Appends the newly created list to menu's container element
r.appendTo(h(a).parent()),
// Change Window.location, ie. the current url,
// to the value of the selected option
r.change(function(){""!=h(this).val()&&(p.location.href=h(this).val())}),
// Label
d.textBefore&&h("<label/>",{html:d.textBefore,for:d.selectId+f}).prependTo(c),
// First option
d.selectOption&&h("<option/>",{text:d.selectOption,value:""}).appendTo(r)}function t(){h(p).resize(function(){n()})}var s="flex",a=h(this);f+=1;var c=h("<div/>",{class:d.menuClass}).appendTo(h(a).parent()),r=h("<select/>",{id:d.selectId+f}).appendTo(c),o=h("<optgroup>").css("display","none");e()})}}(jQuery,this,0);