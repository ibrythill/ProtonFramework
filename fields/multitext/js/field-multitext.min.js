/**
 * protonThemes Custom Fields JavaScript
 *
 * All JavaScript logic for fields in the post meta box.
 * @since 2.2.3
 *
 */



(function ($) {

	protonFieldMethods.multitext = function(element){
		var relid = element.find('proton-multi-text-add').attr('rel-id');
		var container = $('#'+relid);
		var values = element.find('input').val();
		element.find('input').val('');
		var new_input;
		if(values){
			var ids = values.split(',');
			ids.forEach(function(id) {
				if(id){
				new_input = element.find('li:last-child').clone();
				new_input.removeAttr('style').find('input[type="text"]').val(id).attr('name' , container.attr('rel-name'));
				element.find('ul').append(new_input);
				}
			});
		}

	}

	$(document).ready(function () {
		//$('.proton-field-type-multitext').find('input[name="'+$('.proton-field-type-multitext').attr('data-field-name')+'"]').attr('name','');
		$(document).on('click', '.proton-multi-text-remove', function(){
				$(this).prev('input[type="text"]').val('');
				$(this).parent().fadeOut('slow', function(){$(this).remove();});
			});

			$(document).on('click','.proton-multi-text-add', function(){
				var new_input = $('#'+$(this).attr('rel-id')+' li:last-child').clone();
				new_input.removeAttr('style').find('input[type="text"], textarea').val('').attr('name' , $(this).attr('rel-name'));
				$('#'+$(this).attr('rel-id')).append(new_input);
			});

	});

})(jQuery);